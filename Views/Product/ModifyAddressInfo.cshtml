@* @model RocketElevatorsCustomerPortal.Views.Product.ModifyContactInfo *@
@* @model dynamic *@

@{
    ViewBag.Title = "Modify Address";
}

@model Address

<link href="dashboard.css" rel="stylesheet">

<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
    @* <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"> *@
    @*     <h1 class="h2">Modify Contact Info</h1> *@
    @* </div> *@

    <h2>Modify Address Info <a asp-action="Index" class="btn btn-sm btn-secondary">Back</a></h2>
    <form onsubmit="return ModifyAddressInfo()">
        <div class="form-group">
            <label asp-for="id"></label>
            <input class="form-control" value="@Model.id" asp-for="id" asp-for="id" readonly />
        </div>
        <div class="form-group">
            <label asp-for="address_type"></label>
            <input class="form-control" id="address_type" value="@Model.address_type" asp-for="address_type" />
        </div>
        <div class="form-group">
            <label asp-for="status"></label>
            <input class="form-control" id="Status" value="@Model.status" asp-for="status" />
        </div>
        <div class="form-group">
            <label asp-for="entity"></label>
            <input class="form-control" id="Entity" value="@Model.entity" asp-for="entity" />
        </div>
        <div class="form-group">
            <label asp-for="number_and_street"></label>
            <input class="form-control" id="NumberAndStreet" value="@Model.number_and_street" asp-for="number_and_street" />
        </div>
        <div class="form-group">
            <label asp-for="suite_or_apartment"></label>
            <input class="form-control" id="Apt" value="@Model.suite_or_apartment" asp-for="suite_or_apartment" />
        </div>
        <div class="form-group">
            <label asp-for="city"></label>
            <input class="form-control" id="City" value="@Model.city" asp-for="city" />
        </div>
        <div class="form-group">
            <label asp-for="postal_code"></label>
            <input class="form-control" id="PostalCode" value="@Model.postal_code" asp-for="postal_code" />
        </div>
        <div class="form-group">
            <label asp-for="country"></label>
            <input class="form-control" id="Country" value="@Model.country" asp-for="country" />
        </div>
        <div class="form-group">
            <label asp-for="notes"></label>
            <input class="form-control" id="Notes" value="@Model.notes" asp-for="notes" />
        </div>
        <div class="text-center panel-body">
            <button type="submit" class="btn btn-sm btn-primary">Update</button>
        </div>
    </form>

    @if (ViewBag.Result == "Success")
    {
        <h2>Account</h2>
        <table class="table table-sm table-striped table-bordered m-2">
            <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Type</th>
                <th scope="col">Status</th>
                <th scope="col">Entity</th>
                <th scope="col">Street</th>
                <th scope="col">Suite</th>
                <th scope="col">City</th>
                <th scope="col">Zip</th>
                <th scope="col">Country</th>
                <th scope="col">Notes</th>
            </tr>
            </thead>
            <tbody>

            <tr>
                <td>@Model.id</td>
                <td>@Model.address_type</td>
                <td>@Model.status</td>
                <td>@Model.entity</td>
                <td>@Model.number_and_street</td>
                <td>@Model.suite_or_apartment</td>
                <td>@Model.city</td>
                <td>@Model.postal_code</td>
                <td>@Model.country</td>
                <td>@Model.notes</td>
            </tr>

            </tbody>
        </table>
    }
    
</main>

    <script>  
    function ModifyAddressInfo() {
        // $(document).ready(function ModifyContactInfo() {
            var data = {
                id: $('#id').val(),
                address_type: $('#address_type').val(),
                status: $('#Status').val(),
                entity: $('#Entity').val(),
                number_and_street: $('#NumberAndStreet').val(),
                suite_or_apartment: $('#Apt').val(),
                city: $('#City').val(),
                postal_code: $('#PostalCode').val(),
                country: $('#Country').val(),
                notes: $('#Notes').val()
            };
            console.log(data)
            // var customer = new Customer();  
            // customer.CompanyName = "";  
            // customer.NameOfContact = ""; 
            //  $("#update").click(function () {
                $.ajax({  
                    url: 'https://whispering-tundra-91467.herokuapp.com/api/addresses',  
                    type: 'PUT',  
                    // dataType: 'json',  
                    data: JSON.stringify(data),
                    headers: {
                        "Access-Control-Allow-Origin": "*",
                        "Access-Control-Allow-Methods": "HEAD, GET, POST, PUT, PATCH, DELETE",
                        "Access-Control-Allow-Headers": "Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    success: function (data, textStatus, xhr) {  
                        console.log(data);
                        alert('Info updated');
                    },  
                    error: function (xhr, textStatus, errorThrown) {  
                        console.log('Error in Operation');
                        console.log(data);
                        alert('Failed to update');
                    }  
                });  
            return false;
        }
    </script>  

@* <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" crossorigin="anonymous"></script>
<script src="~/js/dashboard.js"></script> *@